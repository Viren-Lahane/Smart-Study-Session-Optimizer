<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Study Optimizer - AI Dashboard</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
        <div class="toggle-track">
            <div class="toggle-thumb">
                <i class="fas fa-sun light-icon"></i>
                <i class="fas fa-moon dark-icon"></i>
            </div>
        </div>
    </button>

    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-brain"></i>
                        <div class="logo-pulse"></div>
                    </div>
                    <div class="logo-text">
                        <h2>StudyAI</h2>
                        <span class="logo-badge">Pro</span>
                    </div>
                </div>
            </div>

            <nav class="nav-menu">
                <button class="nav-item active" data-section="dashboard">
                    <div class="nav-icon-wrapper"><i class="fas fa-chart-line"></i></div>
                    <span>Dashboard</span>
                    <div class="nav-indicator"></div>
                </button>
                <button class="nav-item" data-section="sessions">
                    <div class="nav-icon-wrapper"><i class="fas fa-clock"></i></div>
                    <span>Sessions</span>
                    <div class="nav-indicator"></div>
                </button>
                <button class="nav-item" data-section="analytics">
                    <div class="nav-icon-wrapper"><i class="fas fa-chart-pie"></i></div>
                    <span>Analytics</span>
                    <div class="nav-indicator"></div>
                </button>
                <button class="nav-item" data-section="recommendations">
                    <div class="nav-icon-wrapper"><i class="fas fa-lightbulb"></i></div>
                    <span>AI Insights</span>
                    <div class="nav-badge">NEW</div>
                    <div class="nav-indicator"></div>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="system-status">
                    <h4><i class="fas fa-server"></i> System Status</h4>
                    <div class="status-grid">
                        <div class="status-item" id="api-status-sidebar">
                            <div class="status-dot" id="api-dot-sidebar"></div>
                            <span>API Server</span>
                        </div>
                        <div class="status-item" id="agent-status-sidebar">
                            <div class="status-dot" id="agent-dot-sidebar"></div>
                            <span>ML Engine</span>
                        </div>
                    </div>
                </div>
                <div class="user-profile-sidebar">
                    <div class="avatar-sidebar"><i class="fas fa-user"></i></div>
                    <div class="user-info">
                        <span class="user-name">Sejal</span>
                        <span class="user-role">Student</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="top-bar-left">
                    <h1><i class="fas fa-graduation-cap"></i> Study Dashboard</h1>
                    <span class="page-subtitle">AI-powered insights for smarter learning</span>
                </div>
                <div class="top-bar-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search...">
                    </div>
                    <button class="action-btn notification-btn" title="Notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <button class="action-btn" onclick="refreshRecommendations()" title="Refresh Data">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content">
                <!-- Removed static top stats (they will show after session stops) -->

                <div class="dashboard-grid">
                    <!-- AI Recommendations -->
                    <div class="card ai-recommendations card-glow">
                        <div class="card-header">
                            <div class="card-title"><i class="fas fa-robot"></i>
                                <h3>AI Recommendations</h3>
                            </div>
                            <div class="ai-badge pulse-animation"><i class="fas fa-sparkles"></i><span>AI Powered</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="recommendation-main">
                                <div class="recommendation-icon"><i class="fas fa-lightbulb"></i></div>
                                <div class="recommendation-type" id="break-type">CONTINUE</div>
                                <div class="recommendation-message" id="break-message">Keep going! You're in a good flow
                                    state</div>

                                <div id="learner-type"
                                    style="margin-top: 0.8rem; font-size: 1rem; color: var(--text-secondary);">
                                    <i class="fas fa-user-graduate"></i> Learner State: <strong>Analyzing...</strong>
                                </div>

                                <div class="confidence-container">
                                    <div class="confidence-label">
                                        <span>AI Confidence</span>
                                        <span class="confidence-value" id="break-confidence">75%</span>
                                    </div>
                                    <div class="confidence-track">
                                        <div class="confidence-fill" id="confidence-fill"></div>
                                        <div class="confidence-glow"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Current Session -->
                    <div class="card current-session card-animated">
                        <div class="card-header">
                            <div class="card-title"><i class="fas fa-play-circle"></i>
                                <h3>Current Session</h3>
                            </div>
                            <div class="session-status" id="session-status">
                                <div class="pulse-dot"></div><span>Inactive</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Start Session -->
                            <div class="session-start-container" id="session-start-container"
                                style="text-align:center; padding:2rem;">
                                <button id="start-session-btn" class="start-session-btn">
                                    <i class="fas fa-play"></i><span>Start Study Session</span>
                                </button>
                                <p style="color:var(--text-secondary); margin-top:1rem; font-size:0.9rem;">Click to
                                    begin tracking your study session</p>
                            </div>

                            <!-- Stop Session -->
                            <div class="session-stop-container" id="session-stop-container"
                                style="display:none; text-align:center; padding:2rem;">
                                <button id="stop-session-btn" class="stop-session-btn"
                                    style="background:#ef4444; color:white; border:none; padding:0.75rem 1.5rem; border-radius:8px; font-size:1rem; cursor:pointer;">
                                    <i class="fas fa-stop"></i><span>Stop Session</span>
                                </button>
                                <p style="color:var(--text-secondary); margin-top:1rem; font-size:0.9rem;">Click to end
                                    and save your study session</p>
                            </div>

                            <!-- Timer -->
                            <div class="session-timer-wrapper" id="session-timer-wrapper" style="display:none;">
                                <div class="circular-progress">
                                    <svg class="progress-ring" width="160" height="160">
                                        <circle class="progress-ring-bg" cx="80" cy="80" r="70"></circle>
                                        <circle class="progress-ring-circle" cx="80" cy="80" r="70"></circle>
                                    </svg>
                                    <div class="timer-center">
                                        <div class="timer-display" id="session-duration">0m</div>
                                        <div class="timer-label">Duration</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Metrics -->
                            <div class="session-metrics-grid" id="session-metrics-grid" style="display:none;">
                                <div class="metric-box">
                                    <div class="metric-icon"><i class="fas fa-bullseye"></i></div>
                                    <div class="metric-info">
                                        <div class="metric-value" id="focus-score">0%</div>
                                        <div class="metric-label">Focus</div>
                                    </div>
                                </div>
                                <div class="metric-box">
                                    <div class="metric-icon"><i class="fas fa-book"></i></div>
                                    <div class="metric-info">
                                        <div class="metric-value" id="current-app">Study</div>
                                        <div class="metric-label">Subject</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Focus Trends -->
                    <div class="card chart-card">
                        <div class="card-header">
                            <div class="card-title"><i class="fas fa-chart-area"></i>
                                <h3>Focus Trends</h3>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="chart-container"><canvas id="focusChart"></canvas></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <p>Loading AI insights...</p>
        </div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <script src="/static/dashboard.js"></script>
    <!-- ðŸ§¾ Session Summary Modal -->
    <div id="summaryModal" class="modal">
        <div id="summaryContent" class="modal-content"></div>
        <button id="closeSummary" class="close-btn">Close</button>
    </div>

</body>

</html>